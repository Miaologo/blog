---
title: iOS开发之锁
date: 2019-08-08 20:50:00
tags:
	- iOS
	- 锁
	- 多线程
---

获取锁失败，线程有两种状态：

- 空转状态：线程执行空任务循环等待，当锁可用时立即获取锁。
- 挂起状态：线程挂起，当锁可用时需要其他线程唤醒。

唤醒线程比较耗时，线程空转需要消耗 CPU 资源并且时间越长消耗越多，由此可知空转适合少量任务、挂起适合大量任务。

实际上互斥锁和读写锁都有空转锁的特性，它们在获取锁失败时会先空转一段时间，然后才会挂起，而空转锁也不会永远的空转，在特定的空转时间过后仍然会挂起，所以通常情况下不用刻意去使用空转锁